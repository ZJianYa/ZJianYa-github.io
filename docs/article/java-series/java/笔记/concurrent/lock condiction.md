
## 死锁

- 死锁
  - 原因  
    线程互斥，占有且不释放，不可抢占，循环等待
  - 解决方法
   - 事前  
     设置良好的通信、协调机制  
     - 等待超时  
     - 发现条件不满足，自动退让  
     - 支持中断响应  
   - 事中  
     - 检测和kill 线程  
   - 事后  

## lock

- 支持等待超时  
- 发现条件不满足，自动退让  
- 支持中断响应  

加锁: state  += 1  
解锁: state -= 1  

### ReentrantLock

可重入，在于写之前是需要先读的，那么可能重复加锁，因为可重入所以也需要多次释放锁。  

t1  t2  

