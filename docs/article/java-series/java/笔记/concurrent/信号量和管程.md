# 概述

https://en.wikipedia.org/wiki/Reference_monitor  
https://www.jianshu.com/p/32e1361817f0  管程  
信号量和管程的区别是什么？  
管程可以暂时释放锁，而信号量不可以释放锁  
  
## 信号量

其实和 monitor 十分相似，但是没有考虑条件不满足的情况下，退出临界区。  

## 管程

外部等待队列  
条件变量  
wait，wait 肯定有 wait 队列  
signal/notify  

底层支持: 禁止中断 禁用缓存   

## FAQ

- 所谓的  

## TODO

- 最大的疑惑是哪些操作是原子性的，怎样使操作具有原子性  
- 各种管程的模型是什么  
- 所谓的共享变量等待队列，我不清楚  
  - 共享变量，管程是不可能知道的  
  - wait 应该有队列，出队操作做判断队列是否为空本身没有啥问题，但是 synchronized 显然不能这么做  
